{"ast":null,"code":"import _slicedToArray from \"/home/alireza/Documents/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/alireza/Documents/react/src/Components/IrisaComponents/CompositeTree.js\";\nimport React, { useState, useEffect } from 'react';\nimport SortableTree from 'react-sortable-tree';\nimport 'react-sortable-tree/style.css'; // This only needs to be imported once in your app\n\nfunction CompositeTree(props) {\n  const url = props.url;\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        data = _useState2[0],\n        setData = _useState2[1];\n\n  useEffect(() => {\n    console.log('composite tree is rendering-useEffect');\n    let isLoaded = false;\n\n    async function callWebserviceGetPersonInfo() {\n      if (!isLoaded) {\n        //const recievedData = [{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند شناسایی و تحلیل اقدام\",\"compositeName\":\"ACM_ActionAnalysis_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرایند ارزیابی\",\"compositeName\":\"ACM_Assessment_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند شناسایی تغییرات\",\"compositeName\":\"ACM_ChangeIdentify_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند مدیریت تغییرات پروژه های بهبود\",\"compositeName\":\"ACM_ChangePrjPlan_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند پایش و اجرای پروژه\",\"compositeName\":\"ACM_Monitoring_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند برنامه ریزی و تکمیل اطلاعات پروژه\",\"compositeName\":\"ACM_Planing_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرایند پایش و اجرای QF\",\"compositeName\":\"ACM_QF_Monitoring_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند پاداش پروژه\",\"compositeName\":\"ACM_Reward_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند صورتجلسه\",\"compositeName\":\"ACM_SessionFyi_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند تائید پروژه ویژه\",\"compositeName\":\"ACM_SpecialPrjApproval_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"Acm_Process\",\"compositeName\":\"BpmProject1\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست تحویل دارو\",\"compositeName\":\"HSE_DrugRequest_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند اورژانس\",\"compositeName\":\"HSE_Emergency_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند کميسيون پزشکي\",\"compositeName\":\"HSE_MedicalCommission_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"HSE_ReferralExam_PROC\",\"compositeName\":\"HSE_ReferralExam_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"اندازه گيری جنبه هاي زيست محيطي(حادثه ای)\",\"compositeName\":\"HSE_RequestEnvironmentalAspects_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست اندازه گیری عوامل زیان آور شغلی\",\"compositeName\":\"HSE_RequestMeasuringHarmfulFactors_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند مدیریت ریسک\",\"compositeName\":\"HSE_Risk_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"اندازه گیری عوامل زیان آور شغلی\",\"compositeName\":\"HSE_MeasuringHarmfulFactor_PRJ\"},{\"applicationType\":\"LAB\",\"persianName\":\"LAB_DonNoneRoutinsSamples_PROC\",\"compositeName\":\"LAB_NonRoutineSamples_PRJ\"},{\"applicationType\":\"LAB\",\"persianName\":\"فرآیند آزمون نمونه روانکارها\",\"compositeName\":\"LAB_Lubricant_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"ارزیابی توسط چک لیست ها\",\"compositeName\":\"HSE_CheckList_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"ارزیابی جنبه های زیست محیطی(عادی و غیر عادی،حادثه ای)\",\"compositeName\":\"hse_AssessmentEnvironmentalAspects_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند سم پاشی\",\"compositeName\":\"HSE_Spraying_PRJ\"}];    \n        const recievedData = [{\n          \"applicationType\": \"ACM\",\n          \"persianName\": \"سیستم اقدامات-فرآیند شناسایی و تحلیل اقدام\",\n          \"compositeName\": \"ACM_ActionAnalysis_PRJ\"\n        }, {\n          \"applicationType\": \"HSE\",\n          \"persianName\": \"Acm_Process\",\n          \"compositeName\": \"BpmProject1\"\n        }, {\n          \"applicationType\": \"HSE\",\n          \"persianName\": \"درخواست تحویل دارو\",\n          \"compositeName\": \"HSE_DrugRequest_PRJ\"\n        }];\n        const appTypes = new Set();\n        recievedData.forEach(item => {\n          appTypes.add(item.applicationType);\n        });\n        let jSonString = [];\n        appTypes.forEach(item => {\n          const filteredData = recievedData.filter(itemSub => itemSub.applicationType === item);\n          jSonString = [...jSonString, {\n            title: item,\n            children: filteredData.map(obj => {\n              return {\n                title: obj.persianName,\n                children: []\n              };\n            })\n          }];\n        });\n        console.log(\"jSonString\", JSON.stringify(jSonString));\n        setData(jSonString);\n        isLoaded = true;\n      }\n    }\n\n    callWebserviceGetPersonInfo();\n  }, []); //console.log('composite tree is rendering')\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(SortableTree, {\n    treeData: data,\n    onChange: treeData => setData(treeData),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }));\n}\n\nexport default CompositeTree;","map":{"version":3,"sources":["/home/alireza/Documents/react/src/Components/IrisaComponents/CompositeTree.js"],"names":["React","useState","useEffect","SortableTree","CompositeTree","props","url","data","setData","console","log","isLoaded","callWebserviceGetPersonInfo","recievedData","appTypes","Set","forEach","item","add","applicationType","jSonString","filteredData","filter","itemSub","title","children","map","obj","persianName","JSON","stringify","treeData"],"mappings":";;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,SAAvB,QAAuC,OAAvC;AACA,OAAOC,YAAP,MAAyB,qBAAzB;AACA,OAAO,+BAAP,C,CAAwC;;AAExC,SAASC,aAAT,CAAuBC,KAAvB,EAA6B;AAAA,QAClBC,GADkB,GACXD,KADW,CAClBC,GADkB;;AAAA,oBAEFL,QAAQ,CAAC,EAAD,CAFN;AAAA;AAAA,QAElBM,IAFkB;AAAA,QAEbC,OAFa;;AAKzBN,EAAAA,SAAS,CAAC,MAAI;AACVO,IAAAA,OAAO,CAACC,GAAR,CAAY,uCAAZ;AAEA,QAAIC,QAAQ,GAAG,KAAf;;AACA,mBAAeC,2BAAf,GAA4C;AACxC,UAAG,CAACD,QAAJ,EAAa;AACT;AACA,cAAME,YAAY,GAAG,CAAC;AAAC,6BAAkB,KAAnB;AAAyB,yBAAc,4CAAvC;AAAoF,2BAAgB;AAApG,SAAD,EAA+H;AAAC,6BAAkB,KAAnB;AAAyB,yBAAc,aAAvC;AAAqD,2BAAgB;AAArE,SAA/H,EAAmN;AAAC,6BAAkB,KAAnB;AAAyB,yBAAc,oBAAvC;AAA4D,2BAAgB;AAA5E,SAAnN,CAArB;AAEA,cAAMC,QAAQ,GAAG,IAAIC,GAAJ,EAAjB;AAEAF,QAAAA,YAAY,CAACG,OAAb,CAAqBC,IAAI,IAAE;AACvBH,UAAAA,QAAQ,CAACI,GAAT,CAAaD,IAAI,CAACE,eAAlB;AACH,SAFD;AAIA,YAAIC,UAAU,GAAG,EAAjB;AACAN,QAAAA,QAAQ,CAACE,OAAT,CAAiBC,IAAI,IAAE;AACnB,gBAAMI,YAAY,GAAGR,YAAY,CAACS,MAAb,CAAoBC,OAAO,IAAEA,OAAO,CAACJ,eAAR,KAA0BF,IAAvD,CAArB;AACAG,UAAAA,UAAU,GAAG,CAAC,GAAGA,UAAJ,EAAe;AAACI,YAAAA,KAAK,EAACP,IAAP;AAAYQ,YAAAA,QAAQ,EAACJ,YAAY,CAACK,GAAb,CAAiBC,GAAG,IAAE;AAAC,qBAAO;AAACH,gBAAAA,KAAK,EAACG,GAAG,CAACC,WAAX;AAAuBH,gBAAAA,QAAQ,EAAC;AAAhC,eAAP;AAA2C,aAAlE;AAArB,WAAf,CAAb;AACH,SAHD;AAKAhB,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyBmB,IAAI,CAACC,SAAL,CAAeV,UAAf,CAAzB;AAEAZ,QAAAA,OAAO,CAACY,UAAD,CAAP;AAEAT,QAAAA,QAAQ,GAAG,IAAX;AACH;AACJ;;AAEDC,IAAAA,2BAA2B;AAC9B,GA9BQ,EA8BP,EA9BO,CAAT,CALyB,CAqCzB;;AAEA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC,oBAAC,YAAD;AACG,IAAA,QAAQ,EAAEL,IADb;AAEG,IAAA,QAAQ,EAAEwB,QAAQ,IAAIvB,OAAO,CAAEuB,QAAF,CAFhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADJ;AAQH;;AAED,eAAe3B,aAAf","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport SortableTree from 'react-sortable-tree';\nimport 'react-sortable-tree/style.css'; // This only needs to be imported once in your app\n\nfunction CompositeTree(props){\n    const {url} = props;\n    const [data,setData] = useState([]);\n    \n\n    useEffect(()=>{\n        console.log('composite tree is rendering-useEffect')\n\n        let isLoaded = false;\n        async function callWebserviceGetPersonInfo(){\n            if(!isLoaded){\n                //const recievedData = [{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند شناسایی و تحلیل اقدام\",\"compositeName\":\"ACM_ActionAnalysis_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرایند ارزیابی\",\"compositeName\":\"ACM_Assessment_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند شناسایی تغییرات\",\"compositeName\":\"ACM_ChangeIdentify_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند مدیریت تغییرات پروژه های بهبود\",\"compositeName\":\"ACM_ChangePrjPlan_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند پایش و اجرای پروژه\",\"compositeName\":\"ACM_Monitoring_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند برنامه ریزی و تکمیل اطلاعات پروژه\",\"compositeName\":\"ACM_Planing_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرایند پایش و اجرای QF\",\"compositeName\":\"ACM_QF_Monitoring_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند پاداش پروژه\",\"compositeName\":\"ACM_Reward_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند صورتجلسه\",\"compositeName\":\"ACM_SessionFyi_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند تائید پروژه ویژه\",\"compositeName\":\"ACM_SpecialPrjApproval_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"Acm_Process\",\"compositeName\":\"BpmProject1\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست تحویل دارو\",\"compositeName\":\"HSE_DrugRequest_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند اورژانس\",\"compositeName\":\"HSE_Emergency_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند کميسيون پزشکي\",\"compositeName\":\"HSE_MedicalCommission_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"HSE_ReferralExam_PROC\",\"compositeName\":\"HSE_ReferralExam_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"اندازه گيری جنبه هاي زيست محيطي(حادثه ای)\",\"compositeName\":\"HSE_RequestEnvironmentalAspects_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست اندازه گیری عوامل زیان آور شغلی\",\"compositeName\":\"HSE_RequestMeasuringHarmfulFactors_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند مدیریت ریسک\",\"compositeName\":\"HSE_Risk_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"اندازه گیری عوامل زیان آور شغلی\",\"compositeName\":\"HSE_MeasuringHarmfulFactor_PRJ\"},{\"applicationType\":\"LAB\",\"persianName\":\"LAB_DonNoneRoutinsSamples_PROC\",\"compositeName\":\"LAB_NonRoutineSamples_PRJ\"},{\"applicationType\":\"LAB\",\"persianName\":\"فرآیند آزمون نمونه روانکارها\",\"compositeName\":\"LAB_Lubricant_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"ارزیابی توسط چک لیست ها\",\"compositeName\":\"HSE_CheckList_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"ارزیابی جنبه های زیست محیطی(عادی و غیر عادی،حادثه ای)\",\"compositeName\":\"hse_AssessmentEnvironmentalAspects_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند سم پاشی\",\"compositeName\":\"HSE_Spraying_PRJ\"}];    \n                const recievedData = [{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند شناسایی و تحلیل اقدام\",\"compositeName\":\"ACM_ActionAnalysis_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"Acm_Process\",\"compositeName\":\"BpmProject1\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست تحویل دارو\",\"compositeName\":\"HSE_DrugRequest_PRJ\"}];    \n\n                const appTypes = new Set()\n             \n                recievedData.forEach(item=>{\n                    appTypes.add(item.applicationType)\n                })\n                \n                let jSonString = [];\n                appTypes.forEach(item=>{\n                    const filteredData = recievedData.filter(itemSub=>itemSub.applicationType===item)\n                    jSonString = [...jSonString,{title:item,children:filteredData.map(obj=>{return {title:obj.persianName,children:[]}})}]\n                })\n\n                console.log(\"jSonString\",JSON.stringify(jSonString))\n\n                setData(jSonString);\n                \n                isLoaded = true;\n            }\n        }\n\n        callWebserviceGetPersonInfo();\n    },[])\n\n    //console.log('composite tree is rendering')\n\n    return (\n        <div>\n         <SortableTree\n            treeData={data}\n            onChange={treeData => setData( treeData )}\n        />\n        </div>\n        )\n}\n\nexport default CompositeTree"]},"metadata":{},"sourceType":"module"}