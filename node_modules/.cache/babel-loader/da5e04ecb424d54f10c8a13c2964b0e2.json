{"ast":null,"code":"import _slicedToArray from \"/home/alireza/Documents/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/alireza/Documents/react/src/Components/IrisaComponents/CompositeTree.js\";\nimport React, { useState, useEffect } from 'react';\nimport SortableTree from 'react-sortable-tree';\nimport 'react-sortable-tree/style.css'; // This only needs to be imported once in your app\n\nimport { Checkbox, Button, Dialog, DialogTitle, TextField, Slide, AppBar, Toolbar, IconButton, Typography } from '@material-ui/core';\nimport { CloseIcon } from '@material-ui/icons/Close';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types'; // const Transition = React.forwardRef(function Transition(props, ref) {\n//     return <Slide direction=\"up\" ref={ref} {...props} />;\n//   });\n\nconst styles = {\n  appBar: {\n    position: 'relative',\n    height: '48px',\n    margin: '0px',\n    padding: '0px'\n  },\n  flex: {\n    flex: 1\n  }\n};\n\nfunction CompositeTree(props) {\n  const url = props.url,\n        classes = props.classes,\n        title = props.title,\n        handleReturnFunction = props.handleReturnFunction,\n        buttonOkTitle = props.buttonOkTitle,\n        buttonCancelTitle = props.buttonCancelTitle,\n        value = props.value;\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        data = _useState2[0],\n        setData = _useState2[1];\n\n  const _useState3 = useState(value === undefined ? [] : value),\n        _useState4 = _slicedToArray(_useState3, 2),\n        chkClick = _useState4[0],\n        setChkClick = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        open = _useState6[0],\n        setOpen = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        compositeName = _useState8[0],\n        setCompositeName = _useState8[1];\n\n  useEffect(() => {\n    console.log('composite tree is rendering-useEffect');\n    let isLoaded = false;\n\n    async function callWebserviceGetPersonInfo() {\n      if (!isLoaded) {\n        //const recievedData = [{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند شناسایی و تحلیل اقدام\",\"compositeName\":\"ACM_ActionAnalysis_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرایند ارزیابی\",\"compositeName\":\"ACM_Assessment_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند شناسایی تغییرات\",\"compositeName\":\"ACM_ChangeIdentify_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند مدیریت تغییرات پروژه های بهبود\",\"compositeName\":\"ACM_ChangePrjPlan_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند پایش و اجرای پروژه\",\"compositeName\":\"ACM_Monitoring_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند برنامه ریزی و تکمیل اطلاعات پروژه\",\"compositeName\":\"ACM_Planing_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرایند پایش و اجرای QF\",\"compositeName\":\"ACM_QF_Monitoring_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند پاداش پروژه\",\"compositeName\":\"ACM_Reward_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند صورتجلسه\",\"compositeName\":\"ACM_SessionFyi_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند تائید پروژه ویژه\",\"compositeName\":\"ACM_SpecialPrjApproval_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"Acm_Process\",\"compositeName\":\"BpmProject1\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست تحویل دارو\",\"compositeName\":\"HSE_DrugRequest_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند اورژانس\",\"compositeName\":\"HSE_Emergency_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند کميسيون پزشکي\",\"compositeName\":\"HSE_MedicalCommission_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"HSE_ReferralExam_PROC\",\"compositeName\":\"HSE_ReferralExam_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"اندازه گيری جنبه هاي زيست محيطي(حادثه ای)\",\"compositeName\":\"HSE_RequestEnvironmentalAspects_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست اندازه گیری عوامل زیان آور شغلی\",\"compositeName\":\"HSE_RequestMeasuringHarmfulFactors_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند مدیریت ریسک\",\"compositeName\":\"HSE_Risk_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"اندازه گیری عوامل زیان آور شغلی\",\"compositeName\":\"HSE_MeasuringHarmfulFactor_PRJ\"},{\"applicationType\":\"LAB\",\"persianName\":\"LAB_DonNoneRoutinsSamples_PROC\",\"compositeName\":\"LAB_NonRoutineSamples_PRJ\"},{\"applicationType\":\"LAB\",\"persianName\":\"فرآیند آزمون نمونه روانکارها\",\"compositeName\":\"LAB_Lubricant_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"ارزیابی توسط چک لیست ها\",\"compositeName\":\"HSE_CheckList_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"ارزیابی جنبه های زیست محیطی(عادی و غیر عادی،حادثه ای)\",\"compositeName\":\"hse_AssessmentEnvironmentalAspects_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند سم پاشی\",\"compositeName\":\"HSE_Spraying_PRJ\"}];    \n        const recievedData = [{\n          \"applicationType\": \"ACM\",\n          \"persianName\": \"سیستم اقدامات-فرآیند شناسایی و تحلیل اقدام\",\n          \"compositeName\": \"ACM_ActionAnalysis_PRJ\"\n        }, {\n          \"applicationType\": \"HSE\",\n          \"persianName\": \"Acm_Process\",\n          \"compositeName\": \"BpmProject1\"\n        }, {\n          \"applicationType\": \"HSE\",\n          \"persianName\": \"درخواست تحویل دارو\",\n          \"compositeName\": \"HSE_DrugRequest_PRJ\"\n        }];\n        const appTypes = new Set();\n        recievedData.forEach(item => {\n          appTypes.add(item.applicationType);\n        });\n        let jSonString = [];\n        appTypes.forEach(item => {\n          const filteredData = recievedData.filter(itemSub => itemSub.applicationType === item);\n          jSonString = [...jSonString, {\n            title: item,\n            children: filteredData.map(obj => {\n              return {\n                title: obj.persianName,\n                compositeName: obj.compositeName,\n                children: []\n              };\n            })\n          }];\n        }); //console.log(\"jSonString\",JSON.stringify(jSonString))\n\n        setData(jSonString);\n        isLoaded = true;\n      }\n    }\n\n    callWebserviceGetPersonInfo();\n  }, []); // useEffect(()=>{\n  //     console.log(\"useEffect-->chkClick\",chkClick);\n  // },[chkClick])\n\n  function handleOpen(event) {\n    setOpen(true);\n  }\n\n  function handleClose(event) {\n    setOpen(false);\n  }\n\n  function handleReturnFunc() {\n    if (handleReturnFunction !== undefined) {\n      handleReturnFunction(chkClick.map(item => item.split(\"/\")[1]).filter(obj => obj !== \"\"));\n      setOpen(false);\n    }\n  } //console.log('composite tree is rendering')\n\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    value: compositeName,\n    onClick: handleOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }), open && React.createElement(Dialog, {\n    open: true,\n    title: \"title 1\",\n    fullWidth: true,\n    maxWidth: \"md\" //TransitionComponent={Transition}\n    ,\n    onClose: () => {\n      setOpen(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(AppBar, {\n    className: classes.appBar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(Toolbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"h6\",\n    color: \"inherit\",\n    className: classes.flex,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, title), React.createElement(Button, {\n    color: \"inherit\",\n    onClick: handleReturnFunc,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, buttonOkTitle === undefined ? \"Ok\" : buttonOkTitle), React.createElement(Button, {\n    color: \"inherit\",\n    onClick: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, buttonCancelTitle === undefined ? \"Cancel\" : buttonCancelTitle))), React.createElement(\"div\", {\n    style: {\n      height: 400\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(SortableTree, {\n    treeData: data,\n    onChange: treeData => setData(treeData),\n    canDrag: false,\n    generateNodeProps: ({\n      node,\n      path\n    }) => ({\n      title: React.createElement(React.Fragment, null, React.createElement(Checkbox, {\n        value: node.title + (node.compositeName === undefined || node.compositeName === null ? \"\" : \"/\" + node.compositeName),\n        checked: chkClick.includes(node.title + (node.compositeName === undefined ? \"\" : \"/\" + node.compositeName)),\n        onChange: e => {\n          if (path.length === 1) {\n            if (e.target.checked) {\n              //console.log(e.target.value,data.filter(item=>item.title===e.target.value)[0].children.map(obj=>obj.title+\"/\"+obj.compositeName))\n              let res = data.filter(item => item.title === e.target.value)[0].children.map(obj => obj.title + \"/\" + obj.compositeName);\n              if (!res.includes(e.target.value)) res.push(e.target.value);\n              chkClick.forEach(itm => {\n                if (!res.includes(itm)) res.push(itm);\n              });\n              setChkClick(res);\n            } else {\n              //console.log(e.target.value,data.filter(item=>item.title!==e.target.value)[0].children.map(obj=>obj.title+\"/\"+obj.compositeName))\n              //setChkClick([...chkClick,e.target.value,data.filter(item=>item.title!==e.target.value)[0].children.map(obj=>obj.title+\"/\"+obj.compositeName)])\n              let res = data.filter(item => item.title === e.target.value)[0].children.map(obj => obj.title + \"/\" + obj.compositeName);\n              console.log(\"res\", res);\n              if (res.includes(e.target.value)) res.splice(res.indexOf(e.target.value), 1);\n              chkClick.forEach(itm => {\n                if (res.includes(itm)) res.push(itm);\n              });\n              setChkClick(res);\n            }\n          } else {\n            if (e.target.checked) setChkClick([...chkClick, e.target.value]);else {\n              setChkClick(chkClick.filter(item => item !== e.target.value));\n            }\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, node.title))\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }))));\n}\n\nCompositeTree.propTypes = {\n  classes: PropTypes.object,\n  title: PropTypes.string,\n  handleReturnFunction: PropTypes.func,\n  buttonOkTitle: PropTypes.string,\n  buttonCancelTitle: PropTypes.string,\n  value: PropTypes.object\n};\nexport default withStyles(styles)(CompositeTree);","map":{"version":3,"sources":["/home/alireza/Documents/react/src/Components/IrisaComponents/CompositeTree.js"],"names":["React","useState","useEffect","SortableTree","Checkbox","Button","Dialog","DialogTitle","TextField","Slide","AppBar","Toolbar","IconButton","Typography","CloseIcon","withStyles","PropTypes","styles","appBar","position","height","margin","padding","flex","CompositeTree","props","url","classes","title","handleReturnFunction","buttonOkTitle","buttonCancelTitle","value","data","setData","undefined","chkClick","setChkClick","open","setOpen","compositeName","setCompositeName","console","log","isLoaded","callWebserviceGetPersonInfo","recievedData","appTypes","Set","forEach","item","add","applicationType","jSonString","filteredData","filter","itemSub","children","map","obj","persianName","handleOpen","event","handleClose","handleReturnFunc","split","treeData","node","path","includes","e","length","target","checked","res","push","itm","splice","indexOf","propTypes","object","string","func"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport SortableTree from 'react-sortable-tree';\nimport 'react-sortable-tree/style.css'; // This only needs to be imported once in your app\nimport {Checkbox,Button,Dialog,DialogTitle,TextField,Slide,AppBar,Toolbar,IconButton,Typography} from '@material-ui/core';\nimport {CloseIcon} from '@material-ui/icons/Close';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\n\n// const Transition = React.forwardRef(function Transition(props, ref) {\n//     return <Slide direction=\"up\" ref={ref} {...props} />;\n//   });\n\nconst styles = {\n    appBar: {\n      position: 'relative',\n      height:'48px',\n      margin:'0px',\n      padding:'0px'\n\n    },\n    flex: {\n      flex: 1,\n    },\n  };\n\nfunction CompositeTree(props){\n    const {url,classes,title,handleReturnFunction,buttonOkTitle,buttonCancelTitle,value} = props;\n\n    const [data,setData] = useState([]);\n    const [chkClick,setChkClick] = useState(value===undefined ? []:value);\n    const [open,setOpen] = useState(false);\n    const [compositeName,setCompositeName] = useState('');\n\n    useEffect(()=>{\n        console.log('composite tree is rendering-useEffect')\n\n        let isLoaded = false;\n        async function callWebserviceGetPersonInfo(){\n            if(!isLoaded){\n                //const recievedData = [{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند شناسایی و تحلیل اقدام\",\"compositeName\":\"ACM_ActionAnalysis_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرایند ارزیابی\",\"compositeName\":\"ACM_Assessment_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند شناسایی تغییرات\",\"compositeName\":\"ACM_ChangeIdentify_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند مدیریت تغییرات پروژه های بهبود\",\"compositeName\":\"ACM_ChangePrjPlan_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند پایش و اجرای پروژه\",\"compositeName\":\"ACM_Monitoring_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند برنامه ریزی و تکمیل اطلاعات پروژه\",\"compositeName\":\"ACM_Planing_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرایند پایش و اجرای QF\",\"compositeName\":\"ACM_QF_Monitoring_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند پاداش پروژه\",\"compositeName\":\"ACM_Reward_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند صورتجلسه\",\"compositeName\":\"ACM_SessionFyi_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند تائید پروژه ویژه\",\"compositeName\":\"ACM_SpecialPrjApproval_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"Acm_Process\",\"compositeName\":\"BpmProject1\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست تحویل دارو\",\"compositeName\":\"HSE_DrugRequest_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند اورژانس\",\"compositeName\":\"HSE_Emergency_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند کميسيون پزشکي\",\"compositeName\":\"HSE_MedicalCommission_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"HSE_ReferralExam_PROC\",\"compositeName\":\"HSE_ReferralExam_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"اندازه گيری جنبه هاي زيست محيطي(حادثه ای)\",\"compositeName\":\"HSE_RequestEnvironmentalAspects_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست اندازه گیری عوامل زیان آور شغلی\",\"compositeName\":\"HSE_RequestMeasuringHarmfulFactors_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند مدیریت ریسک\",\"compositeName\":\"HSE_Risk_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"اندازه گیری عوامل زیان آور شغلی\",\"compositeName\":\"HSE_MeasuringHarmfulFactor_PRJ\"},{\"applicationType\":\"LAB\",\"persianName\":\"LAB_DonNoneRoutinsSamples_PROC\",\"compositeName\":\"LAB_NonRoutineSamples_PRJ\"},{\"applicationType\":\"LAB\",\"persianName\":\"فرآیند آزمون نمونه روانکارها\",\"compositeName\":\"LAB_Lubricant_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"ارزیابی توسط چک لیست ها\",\"compositeName\":\"HSE_CheckList_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"ارزیابی جنبه های زیست محیطی(عادی و غیر عادی،حادثه ای)\",\"compositeName\":\"hse_AssessmentEnvironmentalAspects_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند سم پاشی\",\"compositeName\":\"HSE_Spraying_PRJ\"}];    \n                const recievedData = [{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند شناسایی و تحلیل اقدام\",\"compositeName\":\"ACM_ActionAnalysis_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"Acm_Process\",\"compositeName\":\"BpmProject1\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست تحویل دارو\",\"compositeName\":\"HSE_DrugRequest_PRJ\"}];    \n\n                const appTypes = new Set()\n             \n                recievedData.forEach(item=>{\n                    appTypes.add(item.applicationType)\n                })\n                \n                let jSonString = [];\n                appTypes.forEach(item=>{\n                    const filteredData = recievedData.filter(itemSub=>itemSub.applicationType===item)\n                    jSonString = [...jSonString,{title:item,children:filteredData.map(obj=>{return {title:obj.persianName,compositeName:obj.compositeName,children:[]}})}]\n                })\n\n                //console.log(\"jSonString\",JSON.stringify(jSonString))\n\n                setData(jSonString);\n                \n                isLoaded = true;\n            }\n        }\n\n        callWebserviceGetPersonInfo();\n    },[])\n\n    // useEffect(()=>{\n    //     console.log(\"useEffect-->chkClick\",chkClick);\n    // },[chkClick])\n\n    function handleOpen(event){\n        setOpen(true);\n    }\n\n    function handleClose(event){\n        setOpen(false);\n    }\n\n    function handleReturnFunc(){\n        if(handleReturnFunction!==undefined){\n            handleReturnFunction(chkClick.map(item=>item.split(\"/\")[1]).filter(obj=>obj!==\"\"));\n            setOpen(false);\n        }\n    }\n\n    //console.log('composite tree is rendering')\n\n    return (\n        <div>\n        <TextField value={compositeName} onClick={handleOpen}/>\n        {open && \n        <Dialog open={true}\n        title={\"title 1\"}\n        fullWidth={true}\n        maxWidth={\"md\"}\n        //TransitionComponent={Transition}\n        onClose={()=>{setOpen(false)}}\n        >   \n          <AppBar className={classes.appBar}>\n            <Toolbar>\n              <Typography variant=\"h6\" color=\"inherit\" className={classes.flex}>\n                {title}\n              </Typography>\n              <Button color=\"inherit\" onClick={handleReturnFunc}>\n                {buttonOkTitle===undefined ? \"Ok\":buttonOkTitle}\n              </Button>\n              <Button color=\"inherit\" onClick={handleClose}>\n                {buttonCancelTitle===undefined ? \"Cancel\":buttonCancelTitle}\n              </Button>              \n            </Toolbar>\n          </AppBar>\n        <div style={{ height: 400 }}>\n            \n        <SortableTree\n            treeData={data}\n            onChange={treeData => setData( treeData )}\n            canDrag={false}\n            generateNodeProps={({ node, path }) => ({\n                title: (    \n                    <><Checkbox\n                        value={node.title+(node.compositeName===undefined || node.compositeName===null ? \"\":\"/\"+node.compositeName)}\n                        checked={chkClick.includes(node.title+(node.compositeName===undefined ? \"\":\"/\"+node.compositeName))}\n                        onChange={(e)=>{       \n                            if(path.length===1){\n                                if(e.target.checked){        \n                                //console.log(e.target.value,data.filter(item=>item.title===e.target.value)[0].children.map(obj=>obj.title+\"/\"+obj.compositeName))\n                                    let res = data.filter(item=>item.title===e.target.value)[0].children.map(obj=>obj.title+\"/\"+obj.compositeName)\n                                    if(!res.includes(e.target.value))\n                                        res.push(e.target.value);\n                                    chkClick.forEach(itm=>{\n                                        if(!res.includes(itm))\n                                            res.push(itm);\n                                    })\n\n                                    setChkClick(res)\n                                }\n                                else{\n                                //console.log(e.target.value,data.filter(item=>item.title!==e.target.value)[0].children.map(obj=>obj.title+\"/\"+obj.compositeName))\n                                    //setChkClick([...chkClick,e.target.value,data.filter(item=>item.title!==e.target.value)[0].children.map(obj=>obj.title+\"/\"+obj.compositeName)])\n                                    let res = data.filter(item=>item.title===e.target.value)[0].children.map(obj=>obj.title+\"/\"+obj.compositeName)\n                                    console.log(\"res\",res)\n                                    if(res.includes(e.target.value))\n                                        res.splice(res.indexOf(e.target.value),1);\n                                    chkClick.forEach(itm=>{\n                                       \n                                        if(res.includes(itm))\n                                            res.push(itm);\n                                    })\n\n                                    setChkClick(res)\n                                }\n                            } \n                            else{\n                                if(e.target.checked)                 \n                                    setChkClick([...chkClick,e.target.value])\n                                else{\n                                    setChkClick(chkClick.filter(item=>item!==e.target.value))\n                                }\n                            }\n\n                        }}\n                    /><label>{node.title}</label></>\n                ),\n            })}\n        />\n       \n        </div>\n        </Dialog>\n        }\n        </div>\n        )\n}\n\n\nCompositeTree.propTypes = {\n    classes: PropTypes.object,\n    title: PropTypes.string,\n    handleReturnFunction: PropTypes.func,\n    buttonOkTitle: PropTypes.string,\n    buttonCancelTitle: PropTypes.string,\n    value: PropTypes.object,\n};\n\nexport default withStyles(styles)(CompositeTree);\n"]},"metadata":{},"sourceType":"module"}