{"ast":null,"code":"var _jsxFileName = \"/home/alireza/Documents/react/src/Components/IrisaComponents/MyInfinitiveList.js\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { ContentBox, ContentBoxHeader, ContentBoxParagraph } from '../demo/ContentBox';\nimport Immutable from 'immutable'; //import AutoSizer from '../AutoSizer';\n// import InfiniteLoader from './InfiniteLoader';\n// import List from '../List';\n\nimport styles from './InfinitiveLoader.css';\nimport { AutoSizer, InfiniteLoader, List } from 'react-virtualized';\nconst STATUS_LOADING = 1;\nconst STATUS_LOADED = 2;\nexport default class InfiniteLoaderExample extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadedRowCount: 0,\n      loadedRowsMap: {},\n      loadingRowCount: 0\n    };\n    this._timeoutIdMap = {};\n    this._clearData = this._clearData.bind(this);\n    this._isRowLoaded = this._isRowLoaded.bind(this);\n    this._loadMoreRows = this._loadMoreRows.bind(this);\n    this._rowRenderer = this._rowRenderer.bind(this);\n  }\n\n  componentWillUnmount() {\n    Object.keys(this._timeoutIdMap).forEach(timeoutId => {\n      clearTimeout(timeoutId);\n    });\n  }\n\n  render() {\n    const list = this.context.list;\n    const _this$state = this.state,\n          loadedRowCount = _this$state.loadedRowCount,\n          loadingRowCount = _this$state.loadingRowCount;\n    return React.createElement(ContentBox, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(ContentBoxHeader, {\n      text: \"InfiniteLoader\",\n      sourceLink: \"https://github.com/bvaughn/react-virtualized/blob/master/source/InfiniteLoader/InfiniteLoader.example.js\",\n      docsLink: \"https://github.com/bvaughn/react-virtualized/blob/master/docs/InfiniteLoader.md\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }), React.createElement(ContentBoxParagraph, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"This component manages just-in-time data fetching to ensure that the all visible rows have been loaded. It also uses a threshold to determine how early to pre-fetch rows (before a user scrolls to them).\"), React.createElement(ContentBoxParagraph, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.cacheButtonAndCountRow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: styles.button,\n      onClick: this._clearData,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Flush Cached Data\"), React.createElement(\"div\", {\n      className: styles.cacheCountRow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, loadingRowCount, \" loading, \", loadedRowCount, \" loaded\"))), React.createElement(InfiniteLoader, {\n      isRowLoaded: this._isRowLoaded,\n      loadMoreRows: this._loadMoreRows,\n      rowCount: list.size,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, ({\n      onRowsRendered,\n      registerChild\n    }) => React.createElement(AutoSizer, {\n      disableHeight: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, ({\n      width\n    }) => React.createElement(List, {\n      ref: registerChild,\n      className: styles.List,\n      height: 200,\n      onRowsRendered: onRowsRendered,\n      rowCount: list.size,\n      rowHeight: 30,\n      rowRenderer: this._rowRenderer,\n      width: width,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }))));\n  }\n\n  _clearData() {\n    this.setState({\n      loadedRowCount: 0,\n      loadedRowsMap: {},\n      loadingRowCount: 0\n    });\n  }\n\n  _isRowLoaded({\n    index\n  }) {\n    const loadedRowsMap = this.state.loadedRowsMap;\n    return !!loadedRowsMap[index]; // STATUS_LOADING or STATUS_LOADED\n  }\n\n  _loadMoreRows({\n    startIndex,\n    stopIndex\n  }) {\n    const _this$state2 = this.state,\n          loadedRowsMap = _this$state2.loadedRowsMap,\n          loadingRowCount = _this$state2.loadingRowCount;\n    const increment = stopIndex - startIndex + 1;\n\n    for (var i = startIndex; i <= stopIndex; i++) {\n      loadedRowsMap[i] = STATUS_LOADING;\n    }\n\n    this.setState({\n      loadingRowCount: loadingRowCount + increment\n    });\n    const timeoutId = setTimeout(() => {\n      const _this$state3 = this.state,\n            loadedRowCount = _this$state3.loadedRowCount,\n            loadingRowCount = _this$state3.loadingRowCount;\n      delete this._timeoutIdMap[timeoutId];\n\n      for (var i = startIndex; i <= stopIndex; i++) {\n        loadedRowsMap[i] = STATUS_LOADED;\n      }\n\n      this.setState({\n        loadingRowCount: loadingRowCount - increment,\n        loadedRowCount: loadedRowCount + increment\n      });\n      promiseResolver();\n    }, 1000 + Math.round(Math.random() * 2000));\n    this._timeoutIdMap[timeoutId] = true;\n    let promiseResolver;\n    return new Promise(resolve => {\n      promiseResolver = resolve;\n    });\n  }\n\n  _rowRenderer({\n    index,\n    key,\n    style\n  }) {\n    const list = this.context.list;\n    const loadedRowsMap = this.state.loadedRowsMap;\n    const row = list.get(index);\n    let content;\n\n    if (loadedRowsMap[index] === STATUS_LOADED) {\n      content = row.name;\n    } else {\n      content = React.createElement(\"div\", {\n        className: styles.placeholder,\n        style: {\n          width: row.size\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: styles.row,\n      key: key,\n      style: style,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, content);\n  }\n\n}\nInfiniteLoaderExample.contextTypes = {\n  list: PropTypes.instanceOf(Immutable.List).isRequired\n};","map":{"version":3,"sources":["/home/alireza/Documents/react/src/Components/IrisaComponents/MyInfinitiveList.js"],"names":["React","PropTypes","ContentBox","ContentBoxHeader","ContentBoxParagraph","Immutable","styles","AutoSizer","InfiniteLoader","List","STATUS_LOADING","STATUS_LOADED","InfiniteLoaderExample","PureComponent","constructor","props","state","loadedRowCount","loadedRowsMap","loadingRowCount","_timeoutIdMap","_clearData","bind","_isRowLoaded","_loadMoreRows","_rowRenderer","componentWillUnmount","Object","keys","forEach","timeoutId","clearTimeout","render","list","context","cacheButtonAndCountRow","button","cacheCountRow","size","onRowsRendered","registerChild","width","setState","index","startIndex","stopIndex","increment","i","setTimeout","promiseResolver","Math","round","random","Promise","resolve","key","style","row","get","content","name","placeholder","contextTypes","instanceOf","isRequired"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  ContentBox,\n  ContentBoxHeader,\n  ContentBoxParagraph,\n} from '../demo/ContentBox';\nimport Immutable from 'immutable';\n//import AutoSizer from '../AutoSizer';\n// import InfiniteLoader from './InfiniteLoader';\n// import List from '../List';\nimport styles from './InfinitiveLoader.css';\nimport { AutoSizer,InfiniteLoader ,List } from 'react-virtualized';\n\nconst STATUS_LOADING = 1;\nconst STATUS_LOADED = 2;\n\nexport default class InfiniteLoaderExample extends React.PureComponent {\n  static contextTypes = {\n    list: PropTypes.instanceOf(Immutable.List).isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loadedRowCount: 0,\n      loadedRowsMap: {},\n      loadingRowCount: 0,\n    };\n\n    this._timeoutIdMap = {};\n\n    this._clearData = this._clearData.bind(this);\n    this._isRowLoaded = this._isRowLoaded.bind(this);\n    this._loadMoreRows = this._loadMoreRows.bind(this);\n    this._rowRenderer = this._rowRenderer.bind(this);\n  }\n\n  componentWillUnmount() {\n    Object.keys(this._timeoutIdMap).forEach(timeoutId => {\n      clearTimeout(timeoutId);\n    });\n  }\n\n  render() {\n    const {list} = this.context;\n    const {loadedRowCount, loadingRowCount} = this.state;\n\n    return (\n      <ContentBox>\n        <ContentBoxHeader\n          text=\"InfiniteLoader\"\n          sourceLink=\"https://github.com/bvaughn/react-virtualized/blob/master/source/InfiniteLoader/InfiniteLoader.example.js\"\n          docsLink=\"https://github.com/bvaughn/react-virtualized/blob/master/docs/InfiniteLoader.md\"\n        />\n\n        <ContentBoxParagraph>\n          This component manages just-in-time data fetching to ensure that the\n          all visible rows have been loaded. It also uses a threshold to\n          determine how early to pre-fetch rows (before a user scrolls to them).\n        </ContentBoxParagraph>\n\n        <ContentBoxParagraph>\n          <div className={styles.cacheButtonAndCountRow}>\n            <button className={styles.button} onClick={this._clearData}>\n              Flush Cached Data\n            </button>\n\n            <div className={styles.cacheCountRow}>\n              {loadingRowCount} loading, {loadedRowCount} loaded\n            </div>\n          </div>\n        </ContentBoxParagraph>\n\n        <InfiniteLoader\n          isRowLoaded={this._isRowLoaded}\n          loadMoreRows={this._loadMoreRows}\n          rowCount={list.size}>\n          {({onRowsRendered, registerChild}) => (\n            <AutoSizer disableHeight>\n              {({width}) => (\n                <List\n                  ref={registerChild}\n                  className={styles.List}\n                  height={200}\n                  onRowsRendered={onRowsRendered}\n                  rowCount={list.size}\n                  rowHeight={30}\n                  rowRenderer={this._rowRenderer}\n                  width={width}\n                />\n              )}\n            </AutoSizer>\n          )}\n        </InfiniteLoader>\n      </ContentBox>\n    );\n  }\n\n  _clearData() {\n    this.setState({\n      loadedRowCount: 0,\n      loadedRowsMap: {},\n      loadingRowCount: 0,\n    });\n  }\n\n  _isRowLoaded({index}) {\n    const {loadedRowsMap} = this.state;\n    return !!loadedRowsMap[index]; // STATUS_LOADING or STATUS_LOADED\n  }\n\n  _loadMoreRows({startIndex, stopIndex}) {\n    const {loadedRowsMap, loadingRowCount} = this.state;\n    const increment = stopIndex - startIndex + 1;\n\n    for (var i = startIndex; i <= stopIndex; i++) {\n      loadedRowsMap[i] = STATUS_LOADING;\n    }\n\n    this.setState({\n      loadingRowCount: loadingRowCount + increment,\n    });\n\n    const timeoutId = setTimeout(() => {\n      const {loadedRowCount, loadingRowCount} = this.state;\n\n      delete this._timeoutIdMap[timeoutId];\n\n      for (var i = startIndex; i <= stopIndex; i++) {\n        loadedRowsMap[i] = STATUS_LOADED;\n      }\n\n      this.setState({\n        loadingRowCount: loadingRowCount - increment,\n        loadedRowCount: loadedRowCount + increment,\n      });\n\n      promiseResolver();\n    }, 1000 + Math.round(Math.random() * 2000));\n\n    this._timeoutIdMap[timeoutId] = true;\n\n    let promiseResolver;\n\n    return new Promise(resolve => {\n      promiseResolver = resolve;\n    });\n  }\n\n  _rowRenderer({index, key, style}) {\n    const {list} = this.context;\n    const {loadedRowsMap} = this.state;\n\n    const row = list.get(index);\n    let content;\n\n    if (loadedRowsMap[index] === STATUS_LOADED) {\n      content = row.name;\n    } else {\n      content = (\n        <div className={styles.placeholder} style={{width: row.size}} />\n      );\n    }\n\n    return (\n      <div className={styles.row} key={key} style={style}>\n        {content}\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}