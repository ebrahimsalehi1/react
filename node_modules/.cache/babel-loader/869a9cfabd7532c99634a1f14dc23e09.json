{"ast":null,"code":"var _jsxFileName = \"/home/alireza/Documents/react/src/App.js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport SortableTree, { toggleExpandedForAll, ma } from \"react-sortable-tree\";\nimport treeData from \"./treeData\";\nimport \"./stylestree.css\";\nimport \"react-sortable-tree/style.css\";\nconst maxDepth = 5;\n\nconst alertNodeInfo = ({\n  node,\n  path,\n  treeIndex\n}) => {\n  const objectString = Object.keys(node).map(k => k === \"children\" ? \"children: Array\" : `${k}: '${node[k]}'`).join(\",\\n   \");\n  global.alert(\"Info passed to the button generator:\\n\\n\" + `node: {\\n   ${objectString}\\n},\\n` + `path: [${path.join(\", \")}],\\n` + `treeIndex: ${treeIndex}`);\n};\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      searchString: \"\",\n      searchFocusIndex: -1,\n      searchFoundCount: 0,\n      treeData\n    };\n\n    this.handleTreeOnChange = treeData => {\n      this.setState({\n        treeData\n      });\n    };\n\n    this.handleSearchOnChange = e => {\n      this.setState({\n        searchString: e.target.value\n      });\n    };\n\n    this.selectPrevMatch = () => {\n      const _this$state = this.state,\n            searchFocusIndex = _this$state.searchFocusIndex,\n            searchFoundCount = _this$state.searchFoundCount;\n      this.setState({\n        searchFocusIndex: searchFocusIndex !== null ? (searchFoundCount + searchFocusIndex - 1) % searchFoundCount : searchFoundCount - 1\n      });\n    };\n\n    this.selectNextMatch = () => {\n      const _this$state2 = this.state,\n            searchFocusIndex = _this$state2.searchFocusIndex,\n            searchFoundCount = _this$state2.searchFoundCount;\n      this.setState({\n        searchFocusIndex: searchFocusIndex !== null ? (searchFocusIndex + 1) % searchFoundCount : 0\n      });\n    };\n\n    this.toggleNodeExpansion = expanded => {\n      this.setState(prevState => ({\n        treeData: toggleExpandedForAll({\n          treeData: prevState.treeData,\n          expanded\n        })\n      }));\n    };\n  }\n\n  render() {\n    const _this$state3 = this.state,\n          treeData = _this$state3.treeData,\n          searchString = _this$state3.searchString,\n          searchFocusIndex = _this$state3.searchFocusIndex,\n          searchFoundCount = _this$state3.searchFoundCount;\n    return React.createElement(\"div\", {\n      className: \"wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"bar-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.toggleNodeExpansion.bind(this, true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Expand all\"), React.createElement(\"button\", {\n      className: \"collapse\",\n      onClick: this.toggleNodeExpansion.bind(this, false),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Collapse all\"), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Search: \"), React.createElement(\"input\", {\n      onChange: this.handleSearchOnChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"previous\",\n      onClick: this.selectPrevMatch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Previous\"), React.createElement(\"button\", {\n      className: \"next\",\n      onClick: this.selectNextMatch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Next\"), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, searchFocusIndex, \" / \", searchFoundCount)), React.createElement(\"div\", {\n      className: \"tree-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(SortableTree, {\n      treeData: treeData,\n      onChange: this.handleTreeOnChange,\n      onMoveNode: ({\n        node,\n        treeIndex,\n        path\n      }) => global.console.debug(\"node:\", node, \"treeIndex:\", treeIndex, \"path:\", path),\n      maxDepth: maxDepth,\n      searchQuery: searchString,\n      searchFocusOffset: searchFocusIndex,\n      canDrag: ({\n        node\n      }) => !node.noDragging,\n      canDrop: ({\n        nextParent\n      }) => !nextParent || !nextParent.noChildren,\n      searchFinishCallback: matches => this.setState({\n        searchFoundCount: matches.length,\n        searchFocusIndex: matches.length > 0 ? searchFocusIndex % matches.length : 0\n      }),\n      isVirtualized: true,\n      generateNodeProps: rowInfo => ({\n        buttons: [React.createElement(\"button\", {\n          className: \"btn btn-outline-success\",\n          style: {\n            verticalAlign: \"middle\"\n          },\n          onClick: () => alertNodeInfo(rowInfo),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, \"\\u2139\")]\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/alireza/Documents/react/src/App.js"],"names":["React","ReactDOM","SortableTree","toggleExpandedForAll","ma","treeData","maxDepth","alertNodeInfo","node","path","treeIndex","objectString","Object","keys","map","k","join","global","alert","App","Component","state","searchString","searchFocusIndex","searchFoundCount","handleTreeOnChange","setState","handleSearchOnChange","e","target","value","selectPrevMatch","selectNextMatch","toggleNodeExpansion","expanded","prevState","render","bind","console","debug","noDragging","nextParent","noChildren","matches","length","rowInfo","buttons","verticalAlign"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport SortableTree, { toggleExpandedForAll,ma } from \"react-sortable-tree\";\n\nimport treeData from \"./treeData\";\n\nimport \"./stylestree.css\";\nimport \"react-sortable-tree/style.css\";\n\nconst maxDepth = 5;\n\nconst alertNodeInfo = ({ node, path, treeIndex }) => {\n  const objectString = Object.keys(node)\n    .map(k => (k === \"children\" ? \"children: Array\" : `${k}: '${node[k]}'`))\n    .join(\",\\n   \");\n\n  global.alert(\n    \"Info passed to the button generator:\\n\\n\" +\n      `node: {\\n   ${objectString}\\n},\\n` +\n      `path: [${path.join(\", \")}],\\n` +\n      `treeIndex: ${treeIndex}`\n  );\n};\n\nclass App extends React.Component {\n  state = {\n    searchString: \"\",\n    searchFocusIndex: -1,\n    searchFoundCount: 0,\n    treeData\n  };\n\n  handleTreeOnChange = treeData => {\n    this.setState({ treeData });\n  };\n\n  handleSearchOnChange = e => {\n    this.setState({\n      searchString: e.target.value\n    });\n  };\n\n  selectPrevMatch = () => {\n    const { searchFocusIndex, searchFoundCount } = this.state;\n\n    this.setState({\n      searchFocusIndex:\n        searchFocusIndex !== null\n          ? (searchFoundCount + searchFocusIndex - 1) % searchFoundCount\n          : searchFoundCount - 1\n    });\n  };\n\n  selectNextMatch = () => {\n    const { searchFocusIndex, searchFoundCount } = this.state;\n\n    this.setState({\n      searchFocusIndex:\n        searchFocusIndex !== null\n          ? (searchFocusIndex + 1) % searchFoundCount\n          : 0\n    });\n  };\n\n  toggleNodeExpansion = expanded => {\n    this.setState(prevState => ({\n      treeData: toggleExpandedForAll({ treeData: prevState.treeData, expanded })\n    }));\n  };\n\n  render() {\n    const {\n      treeData,\n      searchString,\n      searchFocusIndex,\n      searchFoundCount\n    } = this.state;\n\n    return (\n      <div className=\"wrapper\">\n        <div className=\"bar-wrapper\">\n          <button onClick={this.toggleNodeExpansion.bind(this, true)}>\n            Expand all\n          </button>\n          <button\n            className=\"collapse\"\n            onClick={this.toggleNodeExpansion.bind(this, false)}\n          >\n            Collapse all\n          </button>\n          <label>Search: </label>\n          <input onChange={this.handleSearchOnChange} />\n          <button className=\"previous\" onClick={this.selectPrevMatch}>\n            Previous\n          </button>\n          <button className=\"next\" onClick={this.selectNextMatch}>\n            Next\n          </button>\n          <label>\n            {searchFocusIndex} / {searchFoundCount}\n          </label>\n        </div>\n        <div className=\"tree-wrapper\">\n          <SortableTree\n            treeData={treeData}\n            onChange={this.handleTreeOnChange}\n            onMoveNode={({ node, treeIndex, path }) =>\n              global.console.debug(\n                \"node:\",\n                node,\n                \"treeIndex:\",\n                treeIndex,\n                \"path:\",\n                path\n              )\n            }\n            maxDepth={maxDepth}\n            searchQuery={searchString}\n            searchFocusOffset={searchFocusIndex}\n            canDrag={({ node }) => !node.noDragging}\n            canDrop={({ nextParent }) => !nextParent || !nextParent.noChildren}\n            searchFinishCallback={matches =>\n              this.setState({\n                searchFoundCount: matches.length,\n                searchFocusIndex:\n                  matches.length > 0 ? searchFocusIndex % matches.length : 0\n              })\n            }\n            isVirtualized={true}\n            generateNodeProps={rowInfo => ({\n              buttons: [\n                <button\n                  className=\"btn btn-outline-success\"\n                  style={{\n                    verticalAlign: \"middle\"\n                  }}\n                  onClick={() => alertNodeInfo(rowInfo)}\n                >\n                  ℹ\n                </button>\n              ]\n            })}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}