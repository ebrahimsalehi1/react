{"ast":null,"code":"import _slicedToArray from \"/home/alireza/Documents/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/alireza/Documents/react/src/Components/IrisaComponents/CompositeTree.js\";\nimport React, { useState, useEffect } from 'react';\nimport SortableTree from 'react-sortable-tree';\nimport 'react-sortable-tree/style.css'; // This only needs to be imported once in your app\n\nimport { Checkbox, Button, Dialog, DialogTitle, TextField, Slide, AppBar, Toolbar, IconButton, Typography, Fab, InputBase } from '@material-ui/core';\nimport DoneIcon from '@material-ui/icons/Done';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport SearchIcon from '@material-ui/icons/Search'; // const Transition = React.forwardRef(function Transition(props, ref) {\n//     return <Slide direction=\"up\" ref={ref} {...props} />;\n//   });\n\nconst styles = theme => ({\n  appBar: {\n    position: 'static',\n    height: '48px',\n    margin: '0px',\n    padding: '0px'\n  },\n  flex: {\n    flex: 1\n  },\n  root: {\n    width: '100%'\n  },\n  grow: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  },\n  title: {\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block'\n    }\n  },\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25)\n    },\n    marginLeft: 0,\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing.unit,\n      width: 'auto'\n    }\n  },\n  searchIcon: {\n    width: theme.spacing.unit * 9,\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  inputRoot: {\n    color: 'inherit',\n    width: '100%'\n  },\n  inputInput: {\n    paddingTop: theme.spacing.unit,\n    paddingRight: theme.spacing.unit,\n    paddingBottom: theme.spacing.unit,\n    paddingLeft: theme.spacing.unit * 10,\n    transition: theme.transitions.create('width'),\n    width: '100%' // [theme.breakpoints.up('sm')]: {\n    //   width: 120,\n    //   '&:focus': {\n    //     width: 200,\n    //   },\n    // },\n\n  }\n});\n\nfunction CompositeTree(props) {\n  const url = props.url,\n        classes = props.classes,\n        title = props.title,\n        handleReturnFunction = props.handleReturnFunction,\n        value = props.value,\n        canSearch = props.canSearch,\n        valueToShow = props.valueToShow;\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        data = _useState2[0],\n        setData = _useState2[1];\n\n  const _useState3 = useState(value === undefined ? [] : value),\n        _useState4 = _slicedToArray(_useState3, 2),\n        chkClick = _useState4[0],\n        setChkClick = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        open = _useState6[0],\n        setOpen = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        compositeName = _useState8[0],\n        setCompositeName = _useState8[1];\n\n  const _useState9 = useState(''),\n        _useState10 = _slicedToArray(_useState9, 2),\n        searchQuery = _useState10[0],\n        setSearchQuery = _useState10[1];\n\n  useEffect(() => {\n    console.log('composite tree is rendering-useEffect');\n    let isLoaded = false;\n\n    async function callWebserviceGetPersonInfo() {\n      if (!isLoaded) {\n        const recievedData = [{\n          title: \"A\",\n          children: [{\n            title: ''\n          }]\n        }]; //const recievedData = [{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند شناسایی و تحلیل اقدام\",\"compositeName\":\"ACM_ActionAnalysis_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرایند ارزیابی\",\"compositeName\":\"ACM_Assessment_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند شناسایی تغییرات\",\"compositeName\":\"ACM_ChangeIdentify_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند مدیریت تغییرات پروژه های بهبود\",\"compositeName\":\"ACM_ChangePrjPlan_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند پایش و اجرای پروژه\",\"compositeName\":\"ACM_Monitoring_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند برنامه ریزی و تکمیل اطلاعات پروژه\",\"compositeName\":\"ACM_Planing_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرایند پایش و اجرای QF\",\"compositeName\":\"ACM_QF_Monitoring_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند پاداش پروژه\",\"compositeName\":\"ACM_Reward_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند صورتجلسه\",\"compositeName\":\"ACM_SessionFyi_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند تائید پروژه ویژه\",\"compositeName\":\"ACM_SpecialPrjApproval_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"Acm_Process\",\"compositeName\":\"BpmProject1\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست تحویل دارو\",\"compositeName\":\"HSE_DrugRequest_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند اورژانس\",\"compositeName\":\"HSE_Emergency_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند کميسيون پزشکي\",\"compositeName\":\"HSE_MedicalCommission_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"HSE_ReferralExam_PROC\",\"compositeName\":\"HSE_ReferralExam_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"اندازه گيری جنبه هاي زيست محيطي(حادثه ای)\",\"compositeName\":\"HSE_RequestEnvironmentalAspects_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست اندازه گیری عوامل زیان آور شغلی\",\"compositeName\":\"HSE_RequestMeasuringHarmfulFactors_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند مدیریت ریسک\",\"compositeName\":\"HSE_Risk_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"اندازه گیری عوامل زیان آور شغلی\",\"compositeName\":\"HSE_MeasuringHarmfulFactor_PRJ\"},{\"applicationType\":\"LAB\",\"persianName\":\"LAB_DonNoneRoutinsSamples_PROC\",\"compositeName\":\"LAB_NonRoutineSamples_PRJ\"},{\"applicationType\":\"LAB\",\"persianName\":\"فرآیند آزمون نمونه روانکارها\",\"compositeName\":\"LAB_Lubricant_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"ارزیابی توسط چک لیست ها\",\"compositeName\":\"HSE_CheckList_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"ارزیابی جنبه های زیست محیطی(عادی و غیر عادی،حادثه ای)\",\"compositeName\":\"hse_AssessmentEnvironmentalAspects_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند سم پاشی\",\"compositeName\":\"HSE_Spraying_PRJ\"}];    \n        //const recievedData = [{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند شناسایی و تحلیل اقدام\",\"compositeName\":\"ACM_ActionAnalysis_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"Acm_Process\",\"compositeName\":\"BpmProject1\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست تحویل دارو\",\"compositeName\":\"HSE_DrugRequest_PRJ\"}];    \n\n        const appTypes = new Set();\n        recievedData.forEach(item => {\n          appTypes.add(item.applicationType);\n        });\n        let jSonString = [];\n        appTypes.forEach(item => {\n          const filteredData = recievedData.filter(itemSub => itemSub.applicationType === item);\n          jSonString = [...jSonString, {\n            title: item,\n            children: filteredData.map(obj => {\n              return {\n                title: obj.persianName,\n                compositeName: obj.compositeName,\n                children: []\n              };\n            })\n          }];\n        }); //console.log(\"jSonString\",JSON.stringify(jSonString))\n\n        setData(jSonString);\n        isLoaded = true;\n      }\n    }\n\n    callWebserviceGetPersonInfo();\n  }, []); // useEffect(()=>{\n  //     console.log(\"useEffect-->chkClick\",chkClick);\n  // },[chkClick])\n\n  function handleOpen(event) {\n    setOpen(true);\n  }\n\n  function handleClose(event) {\n    setOpen(false);\n  }\n\n  function handleReturnFunc() {\n    if (handleReturnFunction !== undefined) {\n      const res = chkClick.map(item => item.split(\"/\")[1]).filter(obj => obj !== \"\" && obj !== undefined);\n      setCompositeName(res.join(\"\\n\"));\n      handleReturnFunction(res);\n      setOpen(false);\n    }\n  }\n\n  function handleSearchQueryChange(event) {\n    setSearchQuery(event.target.value);\n  } //console.log('composite tree is rendering')\n\n\n  function clickMe(e) {\n    console.log(\"clickMe\", e);\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    value: compositeName,\n    multiline: true,\n    onClick: handleOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }), open && React.createElement(Dialog, {\n    open: true,\n    title: \"title 1\",\n    fullWidth: true,\n    maxWidth: \"md\" //TransitionComponent={Transition}\n    ,\n    onClose: handleClose,\n    disableBackdropClick: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, React.createElement(AppBar, {\n    position: \"static\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, React.createElement(Toolbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    className: classes.title,\n    variant: \"h6\",\n    color: \"inherit\",\n    noWrap: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, title), React.createElement(\"div\", {\n    className: classes.grow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }), canSearch !== undefined && canSearch && React.createElement(\"div\", {\n    className: classes.search,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.searchIcon,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, React.createElement(SearchIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  })), React.createElement(InputBase, {\n    placeholder: \"\\u062C\\u0633\\u062A\\u062C\\u0648\",\n    classes: {\n      root: classes.inputRoot,\n      input: classes.inputInput\n    },\n    value: searchQuery,\n    onChange: handleSearchQueryChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: classes.grow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }), React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    \"aria-label\": \"Open drawer\",\n    onClick: handleReturnFunc,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, React.createElement(DoneIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  })), React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    \"aria-label\": \"close drawer\",\n    onClick: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, React.createElement(CloseIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  })))), React.createElement(\"div\", {\n    style: {\n      height: 400\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }, React.createElement(SortableTree, {\n    rowDirection: \"rtl\",\n    treeData: data,\n    onChange: treeData => {\n      setData(treeData);\n      console.log(treeData);\n    },\n    onClick: e => console.log(\"click\", e),\n    canDrag: false,\n    searchQuery: searchQuery,\n    generateNodeProps: ({\n      node,\n      path\n    }) => ({\n      title: React.createElement(React.Fragment, null, React.createElement(Checkbox, {\n        value: node.title + (node.compositeName === undefined || node.compositeName === null ? \"\" : \"/\" + node.compositeName),\n        checked: chkClick.includes(node.title + (node.compositeName === undefined ? \"\" : \"/\" + node.compositeName)),\n        onChange: e => {\n          if (path.length === 1) {\n            if (e.target.checked) {\n              let res = data.filter(item => item.title === e.target.value)[0].children.map(obj => obj.title + \"/\" + obj.compositeName);\n              if (!res.includes(e.target.value)) res.push(e.target.value);\n              chkClick.forEach(itm => {\n                if (!res.includes(itm)) res.push(itm);\n              });\n              setChkClick(res);\n            } else {\n              let res = data.filter(item => item.title === e.target.value)[0].children.map(obj => obj.title + \"/\" + obj.compositeName);\n              if (!res.includes(e.target.value)) res.push(e.target.value);\n              setChkClick(chkClick.filter(item => !res.includes(item)));\n            }\n          } else {\n            if (e.target.checked) setChkClick([...chkClick, e.target.value]);else {\n              setChkClick(chkClick.filter(item => item !== e.target.value));\n            }\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        onClick: clickMe(node.compositeName),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, node.title))\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }))));\n}\n\nCompositeTree.propTypes = {\n  classes: PropTypes.object,\n  title: PropTypes.string,\n  handleReturnFunction: PropTypes.func,\n  buttonOkTitle: PropTypes.string,\n  buttonCancelTitle: PropTypes.string,\n  value: PropTypes.object\n};\nexport default withStyles(styles)(CompositeTree);","map":{"version":3,"sources":["/home/alireza/Documents/react/src/Components/IrisaComponents/CompositeTree.js"],"names":["React","useState","useEffect","SortableTree","Checkbox","Button","Dialog","DialogTitle","TextField","Slide","AppBar","Toolbar","IconButton","Typography","Fab","InputBase","DoneIcon","CloseIcon","withStyles","PropTypes","fade","MenuIcon","SearchIcon","styles","theme","appBar","position","height","margin","padding","flex","root","width","grow","flexGrow","menuButton","marginLeft","marginRight","title","display","breakpoints","up","search","borderRadius","shape","backgroundColor","palette","common","white","spacing","unit","searchIcon","pointerEvents","alignItems","justifyContent","inputRoot","color","inputInput","paddingTop","paddingRight","paddingBottom","paddingLeft","transition","transitions","create","CompositeTree","props","url","classes","handleReturnFunction","value","canSearch","valueToShow","data","setData","undefined","chkClick","setChkClick","open","setOpen","compositeName","setCompositeName","searchQuery","setSearchQuery","console","log","isLoaded","callWebserviceGetPersonInfo","recievedData","children","appTypes","Set","forEach","item","add","applicationType","jSonString","filteredData","filter","itemSub","map","obj","persianName","handleOpen","event","handleClose","handleReturnFunc","res","split","join","handleSearchQueryChange","target","clickMe","e","input","treeData","node","path","includes","length","checked","push","itm","propTypes","object","string","func","buttonOkTitle","buttonCancelTitle"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport SortableTree from 'react-sortable-tree';\nimport 'react-sortable-tree/style.css'; // This only needs to be imported once in your app\nimport {Checkbox,Button,Dialog,DialogTitle,TextField,Slide,AppBar,Toolbar,IconButton,Typography,Fab,InputBase} from '@material-ui/core';\nimport DoneIcon from '@material-ui/icons/Done';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport SearchIcon from '@material-ui/icons/Search';\n\n// const Transition = React.forwardRef(function Transition(props, ref) {\n//     return <Slide direction=\"up\" ref={ref} {...props} />;\n//   });\n\nconst styles = theme => ( {\n    appBar: {\n      position: 'static',\n      height:'48px',\n      margin:'0px',\n      padding:'0px'\n\n    },\n    flex: {\n      flex: 1,\n    },\n    root: {\n        width: '100%',\n      },\n      grow: {\n        flexGrow: 1,\n      },\n      menuButton: {\n        marginLeft: -12,\n        marginRight: 20,\n      },\n      title: {\n        display: 'none',\n        [theme.breakpoints.up('sm')]: {\n          display: 'block',\n        },\n      },\n      search: {\n        position: 'relative',\n        borderRadius: theme.shape.borderRadius,\n        backgroundColor: fade(theme.palette.common.white, 0.15),\n        '&:hover': {\n          backgroundColor: fade(theme.palette.common.white, 0.25),\n        },\n        marginLeft: 0,\n        width: '100%',\n        [theme.breakpoints.up('sm')]: {\n          marginLeft: theme.spacing.unit,\n          width: 'auto',\n        },\n      },\n      searchIcon: {\n        width: theme.spacing.unit * 9,\n        height: '100%',\n        position: 'absolute',\n        pointerEvents: 'none',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      },\n      inputRoot: {\n        color: 'inherit',\n        width: '100%',\n      },\n      inputInput: {\n        paddingTop: theme.spacing.unit,\n        paddingRight: theme.spacing.unit,\n        paddingBottom: theme.spacing.unit,\n        paddingLeft: theme.spacing.unit * 10,\n        transition: theme.transitions.create('width'),\n        width: '100%',\n        // [theme.breakpoints.up('sm')]: {\n        //   width: 120,\n        //   '&:focus': {\n        //     width: 200,\n        //   },\n        // },\n      },\n  });\n\nfunction CompositeTree(props){\n    const {url,classes,title,handleReturnFunction,value,canSearch,valueToShow} = props;\n\n    const [data,setData] = useState([]);\n    const [chkClick,setChkClick] = useState(value===undefined ? []:value);\n    const [open,setOpen] = useState(false);\n    const [compositeName,setCompositeName] = useState('');\n    const [searchQuery,setSearchQuery] = useState('');\n\n    useEffect(()=>{\n        console.log('composite tree is rendering-useEffect')\n\n        let isLoaded = false;\n        async function callWebserviceGetPersonInfo(){\n            if(!isLoaded){\n              const recievedData=[{title:\"A\",children:[{title:''}]}]\n                //const recievedData = [{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند شناسایی و تحلیل اقدام\",\"compositeName\":\"ACM_ActionAnalysis_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرایند ارزیابی\",\"compositeName\":\"ACM_Assessment_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند شناسایی تغییرات\",\"compositeName\":\"ACM_ChangeIdentify_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند مدیریت تغییرات پروژه های بهبود\",\"compositeName\":\"ACM_ChangePrjPlan_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند پایش و اجرای پروژه\",\"compositeName\":\"ACM_Monitoring_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند برنامه ریزی و تکمیل اطلاعات پروژه\",\"compositeName\":\"ACM_Planing_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرایند پایش و اجرای QF\",\"compositeName\":\"ACM_QF_Monitoring_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند پاداش پروژه\",\"compositeName\":\"ACM_Reward_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"فرآیند صورتجلسه\",\"compositeName\":\"ACM_SessionFyi_PRJ\"},{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند تائید پروژه ویژه\",\"compositeName\":\"ACM_SpecialPrjApproval_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"Acm_Process\",\"compositeName\":\"BpmProject1\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست تحویل دارو\",\"compositeName\":\"HSE_DrugRequest_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند اورژانس\",\"compositeName\":\"HSE_Emergency_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند کميسيون پزشکي\",\"compositeName\":\"HSE_MedicalCommission_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"HSE_ReferralExam_PROC\",\"compositeName\":\"HSE_ReferralExam_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"اندازه گيری جنبه هاي زيست محيطي(حادثه ای)\",\"compositeName\":\"HSE_RequestEnvironmentalAspects_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست اندازه گیری عوامل زیان آور شغلی\",\"compositeName\":\"HSE_RequestMeasuringHarmfulFactors_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند مدیریت ریسک\",\"compositeName\":\"HSE_Risk_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"اندازه گیری عوامل زیان آور شغلی\",\"compositeName\":\"HSE_MeasuringHarmfulFactor_PRJ\"},{\"applicationType\":\"LAB\",\"persianName\":\"LAB_DonNoneRoutinsSamples_PROC\",\"compositeName\":\"LAB_NonRoutineSamples_PRJ\"},{\"applicationType\":\"LAB\",\"persianName\":\"فرآیند آزمون نمونه روانکارها\",\"compositeName\":\"LAB_Lubricant_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"ارزیابی توسط چک لیست ها\",\"compositeName\":\"HSE_CheckList_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"ارزیابی جنبه های زیست محیطی(عادی و غیر عادی،حادثه ای)\",\"compositeName\":\"hse_AssessmentEnvironmentalAspects_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"فرایند سم پاشی\",\"compositeName\":\"HSE_Spraying_PRJ\"}];    \n                //const recievedData = [{\"applicationType\":\"ACM\",\"persianName\":\"سیستم اقدامات-فرآیند شناسایی و تحلیل اقدام\",\"compositeName\":\"ACM_ActionAnalysis_PRJ\"},{\"applicationType\":\"HSE\",\"persianName\":\"Acm_Process\",\"compositeName\":\"BpmProject1\"},{\"applicationType\":\"HSE\",\"persianName\":\"درخواست تحویل دارو\",\"compositeName\":\"HSE_DrugRequest_PRJ\"}];    \n\n                const appTypes = new Set()\n             \n                recievedData.forEach(item=>{\n                    appTypes.add(item.applicationType)\n                })\n                \n                let jSonString = [];\n                appTypes.forEach(item=>{\n                    const filteredData = recievedData.filter(itemSub=>itemSub.applicationType===item)\n                    jSonString = [...jSonString,{title:item,children:filteredData.map(obj=>{return {title:obj.persianName,compositeName:obj.compositeName,children:[]}})}]\n                })\n\n                //console.log(\"jSonString\",JSON.stringify(jSonString))\n\n                setData(jSonString);\n                \n                isLoaded = true;\n            }\n        }\n\n        callWebserviceGetPersonInfo();\n    },[])\n\n    // useEffect(()=>{\n    //     console.log(\"useEffect-->chkClick\",chkClick);\n    // },[chkClick])\n\n    function handleOpen(event){\n        setOpen(true);\n    }\n\n    function handleClose(event){\n        setOpen(false);\n    }\n\n    function handleReturnFunc(){\n        if(handleReturnFunction!==undefined){ \n            const res = chkClick.map(item=>item.split(\"/\")[1]).filter(obj=>obj!==\"\" && obj!==undefined);\n            setCompositeName(res.join(\"\\n\"));\n            handleReturnFunction(res);\n            setOpen(false);\n        }\n    }\n\n    function handleSearchQueryChange(event){\n        setSearchQuery(event.target.value);\n    }\n\n    //console.log('composite tree is rendering')\n    function clickMe(e){\n        console.log(\"clickMe\",e)\n    }\n\n    return (\n        <div>\n        <TextField \n            value={compositeName} \n            multiline={true}\n            onClick={handleOpen}/>\n        {open && \n        <Dialog open={true}\n        title={\"title 1\"}\n        fullWidth={true}\n        maxWidth={\"md\"}\n        //TransitionComponent={Transition}\n        onClose={handleClose}\n        disableBackdropClick={true}\t\n        >   \n       <AppBar position=\"static\">\n        <Toolbar>\n          <Typography className={classes.title} variant=\"h6\" color=\"inherit\" noWrap>\n            {title}\n          </Typography>\n          <div className={classes.grow} />\n        {canSearch!==undefined && canSearch && \n          <div className={classes.search}>\n            <div className={classes.searchIcon}>\n              <SearchIcon />\n            </div>            \n            <InputBase\n              placeholder=\"جستجو\"\n              classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n              }}\n              value={searchQuery}\n              onChange={handleSearchQueryChange}\n            />\n          </div>\n        }\n          <div className={classes.grow} />\n          <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Open drawer\" onClick={handleReturnFunc}>\n            <DoneIcon />\n          </IconButton>  \n\n          <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"close drawer\" onClick={handleClose}>\n            <CloseIcon />\n          </IconButton> \n\n        </Toolbar>\n      </AppBar>\n              <div style={{ height: 400 }}>\n            \n        <SortableTree\n            rowDirection=\"rtl\"\n            treeData={data}\n            onChange={treeData => {setData( treeData );console.log(treeData);}}\n            onClick={e=>console.log(\"click\",e)}\n            canDrag={false}\n            searchQuery={searchQuery}\n            generateNodeProps={({ node, path }) => ({\n                title: (    \n                    <><Checkbox\n                        value={node.title+(node.compositeName===undefined || node.compositeName===null ? \"\":\"/\"+node.compositeName)}\n                        checked={chkClick.includes(node.title+(node.compositeName===undefined ? \"\":\"/\"+node.compositeName))}                        \n                        onChange={(e)=>{       \n                            if(path.length===1){\n                                if(e.target.checked){        \n                                    let res = data.filter(item=>item.title===e.target.value)[0].children.map(obj=>obj.title+\"/\"+obj.compositeName)\n                                    if(!res.includes(e.target.value))\n                                        res.push(e.target.value);\n                                    chkClick.forEach(itm=>{\n                                        if(!res.includes(itm))\n                                            res.push(itm);\n                                    })\n\n                                    setChkClick(res)\n                                }\n                                else{\n                                    let res = data.filter(item=>item.title===e.target.value)[0].children.map(obj=>obj.title+\"/\"+obj.compositeName)\n                          \n                                    if(!res.includes(e.target.value))\n                                        res.push(e.target.value)\n                                  \n                                    setChkClick(chkClick.filter(item=>!res.includes(item)))\n                                }\n                            } \n                            else{\n                                if(e.target.checked)                 \n                                    setChkClick([...chkClick,e.target.value])\n                                else{\n                                    setChkClick(chkClick.filter(item=>item!==e.target.value))\n                                }\n                            }\n\n                        }}\n                    /><label onClick={clickMe(node.compositeName)}>{node.title}</label></>\n                ),\n            })}\n        />\n       \n        </div>\n        </Dialog>\n        }\n        </div>\n        )\n}\n\n\nCompositeTree.propTypes = {\n    classes: PropTypes.object,\n    title: PropTypes.string,\n    handleReturnFunction: PropTypes.func,\n    buttonOkTitle: PropTypes.string,\n    buttonCancelTitle: PropTypes.string,\n    value: PropTypes.object,\n};\n\nexport default withStyles(styles)(CompositeTree);\n"]},"metadata":{},"sourceType":"module"}